import{n as d,I as h,i as o}from"./index-1e0d0c53.js";var m=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"home-b2b-container"},[e("div",{staticClass:"b2b-header"},[e("div",{staticClass:"header-content"},[t._m(0),e("div",{staticClass:"header-actions"},[e("t-button",{attrs:{theme:"primary"},on:{click:t.handleSwitchToC},scopedSlots:t._u([{key:"icon",fn:function(){return[e("t-icon",{attrs:{name:"switch"}})]},proxy:!0}])},[t._v(" 切换到C端体验 ")]),e("t-button",{attrs:{theme:"default"},on:{click:t.handleRefreshData},scopedSlots:t._u([{key:"icon",fn:function(){return[e("t-icon",{attrs:{name:"refresh"}})]},proxy:!0}])},[t._v(" 刷新数据 ")])],1)])]),e("div",{staticClass:"monitoring-overview"},[e("t-row",{attrs:{gutter:16}},[e("t-col",{attrs:{span:4}},[e("div",{staticClass:"overview-card"},[e("div",{staticClass:"overview-icon primary"},[e("t-icon",{attrs:{name:"api"}})],1),e("div",{staticClass:"overview-content"},[e("div",{staticClass:"overview-value"},[t._v(t._s(t.overviewStats.totalCalls.toLocaleString()))]),e("div",{staticClass:"overview-label"},[t._v("总调用量")]),e("div",{staticClass:"overview-trend"},[e("t-icon",{staticClass:"trend-up",attrs:{name:"trend"}}),e("span",{staticClass:"trend-text"},[t._v("+"+t._s(t.overviewStats.callsGrowth)+"%")]),e("span",{staticClass:"trend-time"},[t._v("过去24小时")])],1)])])]),e("t-col",{attrs:{span:4}},[e("div",{staticClass:"overview-card"},[e("div",{staticClass:"overview-icon warning"},[e("t-icon",{attrs:{name:"time"}})],1),e("div",{staticClass:"overview-content"},[e("div",{staticClass:"overview-value"},[t._v(t._s(t.overviewStats.avgResponseTime)+"ms")]),e("div",{staticClass:"overview-label"},[t._v("平均响应时间")]),e("div",{staticClass:"overview-trend"},[e("t-icon",{staticClass:"trend-down",attrs:{name:"trend"}}),e("span",{staticClass:"trend-text"},[t._v("-"+t._s(t.overviewStats.responseTimeImprovement)+"%")]),e("span",{staticClass:"trend-time"},[t._v("相比昨日")])],1)])])]),e("t-col",{attrs:{span:4}},[e("div",{staticClass:"overview-card"},[e("div",{staticClass:"overview-icon success"},[e("t-icon",{attrs:{name:"check-circle"}})],1),e("div",{staticClass:"overview-content"},[e("div",{staticClass:"overview-value"},[t._v(t._s(t.overviewStats.successRate)+"%")]),e("div",{staticClass:"overview-label"},[t._v("成功率")]),e("div",{staticClass:"overview-trend"},[e("t-icon",{staticClass:"trend-up",attrs:{name:"trend"}}),e("span",{staticClass:"trend-text"},[t._v("+"+t._s(t.overviewStats.successRateGrowth)+"%")]),e("span",{staticClass:"trend-time"},[t._v("相比上周")])],1)])])]),e("t-col",{attrs:{span:4}},[e("div",{staticClass:"overview-card"},[e("div",{staticClass:"overview-icon danger"},[e("t-icon",{attrs:{name:"error-circle"}})],1),e("div",{staticClass:"overview-content"},[e("div",{staticClass:"overview-value"},[t._v(t._s(t.overviewStats.errorRate)+"%")]),e("div",{staticClass:"overview-label"},[t._v("错误率")]),e("div",{staticClass:"overview-trend"},[e("t-icon",{staticClass:"trend-down",attrs:{name:"trend"}}),e("span",{staticClass:"trend-text"},[t._v("-"+t._s(t.overviewStats.errorRateReduction)+"%")]),e("span",{staticClass:"trend-time"},[t._v("相比昨日")])],1)])])])],1)],1),e("div",{staticClass:"main-charts-area"},[e("t-row",{attrs:{gutter:20}},[e("t-col",{attrs:{span:12}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("API调用量趋势")]),e("div",{staticClass:"chart-actions"},[e("t-select",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:t.apiCallsTimeRange,callback:function(s){t.apiCallsTimeRange=s},expression:"apiCallsTimeRange"}},[e("t-option",{attrs:{value:"1h"}},[t._v("最近1小时")]),e("t-option",{attrs:{value:"24h"}},[t._v("最近24小时")]),e("t-option",{attrs:{value:"7d"}},[t._v("最近7天")]),e("t-option",{attrs:{value:"30d"}},[t._v("最近30天")])],1)],1)]),e("div",{staticClass:"chart-container"},[e("div",{ref:"apiCallsChart",staticStyle:{width:"100%",height:"300px"},attrs:{id:"apiCallsChart"}})])])]),e("t-col",{attrs:{span:12}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("API响应时间分布")]),e("div",{staticClass:"chart-actions"},[e("t-select",{staticStyle:{width:"150px"},attrs:{size:"small"},model:{value:t.responseTimeSystem,callback:function(s){t.responseTimeSystem=s},expression:"responseTimeSystem"}},[e("t-option",{attrs:{value:"all"}},[t._v("全部系统")]),e("t-option",{attrs:{value:"employee"}},[t._v("员工管理")]),e("t-option",{attrs:{value:"organization"}},[t._v("组织架构")]),e("t-option",{attrs:{value:"attendance"}},[t._v("考勤管理")]),e("t-option",{attrs:{value:"compensation"}},[t._v("薪酬福利")])],1)],1)]),e("div",{staticClass:"chart-container"},[e("div",{ref:"responseTimeChart",staticStyle:{width:"100%",height:"300px"},attrs:{id:"responseTimeChart"}})])])])],1),e("t-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[e("t-col",{attrs:{span:12}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("API成功率趋势")]),e("div",{staticClass:"chart-actions"},[e("t-select",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:t.successRateType,callback:function(s){t.successRateType=s},expression:"successRateType"}},[e("t-option",{attrs:{value:"all"}},[t._v("全部API")]),e("t-option",{attrs:{value:"critical"}},[t._v("核心API")]),e("t-option",{attrs:{value:"highload"}},[t._v("高负载API")])],1)],1)]),e("div",{staticClass:"chart-container"},[e("div",{ref:"successRateChart",staticStyle:{width:"100%",height:"280px"},attrs:{id:"successRateChart"}})])])]),e("t-col",{attrs:{span:12}},[e("div",{staticClass:"chart-card"},[e("div",{staticClass:"chart-header"},[e("h3",[t._v("API错误分布分析")]),e("div",{staticClass:"chart-actions"},[e("t-select",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:t.errorDistributionView,callback:function(s){t.errorDistributionView=s},expression:"errorDistributionView"}},[e("t-option",{attrs:{value:"by-system"}},[t._v("按系统")]),e("t-option",{attrs:{value:"by-error"}},[t._v("按错误类型")]),e("t-option",{attrs:{value:"by-time"}},[t._v("按时间分布")])],1)],1)]),e("div",{staticClass:"chart-container"},[e("div",{ref:"errorDistributionChart",staticStyle:{width:"100%",height:"280px"},attrs:{id:"errorDistributionChart"}})])])])],1)],1),e("div",{staticClass:"api-performance-ranking"},[t._m(1),e("div",{staticClass:"ranking-table"},[e("t-table",{attrs:{data:t.performanceRanking,columns:t.rankingColumns,"row-key":"id",size:"medium",stripe:"",hover:""},scopedSlots:t._u([{key:"responseTime",fn:function(s){var a=s.row;return[e("div",{staticClass:"metric-cell"},[e("div",{staticClass:"metric-value"},[t._v(t._s(a.responseTime)+"ms")]),e("div",{staticClass:"metric-trend",class:{"trend-up":a.responseTimeTrend==="up","trend-down":a.responseTimeTrend==="down"}},[e("t-icon",{attrs:{name:a.responseTimeTrend==="up"?"trend":"trend-down"}}),t._v(" "+t._s(a.responseTimeChange)+" ")],1)])]}},{key:"successRate",fn:function(s){var a=s.row;return[e("div",{staticClass:"metric-cell"},[e("div",{staticClass:"metric-value"},[t._v(t._s(a.successRate)+"%")]),e("div",{staticClass:"metric-trend",class:{"trend-up":a.successRateTrend==="up","trend-down":a.successRateTrend==="down"}},[e("t-icon",{attrs:{name:a.successRateTrend==="up"?"trend":"trend-down"}}),t._v(" "+t._s(a.successRateChange)+" ")],1)])]}},{key:"callVolume",fn:function(s){var a=s.row;return[e("div",{staticClass:"metric-cell"},[e("div",{staticClass:"metric-value"},[t._v(t._s(a.callVolume.toLocaleString()))]),e("t-progress",{staticStyle:{"margin-top":"4px"},attrs:{percentage:Math.min(a.callVolume/1e4*100,100),color:{from:"#13c2c2",to:"#52c41a"},"show-label":!1,size:"small"}})],1)]}},{key:"actions",fn:function(s){var a=s.row;return[e("t-button",{attrs:{size:"small",variant:"text"},on:{click:function(r){return t.viewApiDetail(a)}}},[t._v(" 详情 ")]),e("t-button",{attrs:{size:"small",variant:"text"},on:{click:function(r){return t.debugApi(a)}}},[t._v(" 调试 ")])]}}])})],1)]),e("div",{staticClass:"real-time-exceptions"},[e("div",{staticClass:"section-header"},[t._m(2),e("div",{staticClass:"header-right"},[e("t-button",{attrs:{theme:"default",size:"small"},on:{click:t.viewAllExceptions}},[t._v(" 查看全部 ")])],1)]),e("div",{staticClass:"exceptions-list"},[e("t-row",{attrs:{gutter:16}},t._l(t.recentExceptions,function(s){return e("t-col",{key:s.id,attrs:{span:8}},[e("div",{staticClass:"exception-card",class:s.severity},[e("div",{staticClass:"exception-header"},[e("div",{staticClass:"exception-severity"},[e("t-icon",{attrs:{name:t.getExceptionIcon(s.severity)}}),e("span",{staticClass:"severity-label"},[t._v(t._s(t.getExceptionLabel(s.severity)))])],1),e("div",{staticClass:"exception-time"},[t._v(t._s(t.formatExceptionTime(s.timestamp)))])]),e("div",{staticClass:"exception-content"},[e("div",{staticClass:"exception-title"},[t._v(t._s(s.apiName))]),e("div",{staticClass:"exception-method",class:s.method},[t._v(t._s(s.method))]),e("div",{staticClass:"exception-error"},[e("t-icon",{attrs:{name:"error-circle",size:"16px"}}),t._v(" "+t._s(s.errorCode)+": "+t._s(s.errorMessage)+" ")],1),e("div",{staticClass:"exception-stats"},[e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("响应时间")]),e("span",{staticClass:"stat-value"},[t._v(t._s(s.responseTime)+"ms")])]),e("div",{staticClass:"stat-item"},[e("span",{staticClass:"stat-label"},[t._v("影响用户")]),e("span",{staticClass:"stat-value"},[t._v(t._s(s.affectedUsers)+"人")])])])]),e("div",{staticClass:"exception-actions"},[e("t-button",{attrs:{size:"small",variant:"text"},on:{click:function(a){return t.viewExceptionDetail(s)}}},[t._v(" 详情 ")]),e("t-button",{attrs:{size:"small",variant:"text"},on:{click:function(a){return t.markExceptionResolved(s)}}},[t._v(" 已处理 ")])],1)])])}),1)],1)]),e("div",{staticClass:"system-health"},[t._m(3),e("div",{staticClass:"health-grid"},t._l(t.systemHealth,function(s){return e("div",{key:s.id,staticClass:"health-card",class:s.status},[e("div",{staticClass:"health-header"},[e("div",{staticClass:"health-icon"},[e("t-icon",{attrs:{name:s.icon}})],1),e("div",{staticClass:"health-info"},[e("h3",[t._v(t._s(s.name))]),e("div",{staticClass:"health-status"},[t._v(t._s(t.getHealthStatusLabel(s.status)))])])]),e("div",{staticClass:"health-metrics"},[e("div",{staticClass:"metric-row"},[e("div",{staticClass:"metric-label"},[t._v("响应时间")]),e("div",{staticClass:"metric-value"},[t._v(t._s(s.responseTime)+"ms")]),e("div",{staticClass:"metric-trend",class:{up:s.responseTimeTrend==="down",down:s.responseTimeTrend==="up"}},[t._v(" "+t._s(s.responseTimeChange)+" ")])]),e("div",{staticClass:"metric-row"},[e("div",{staticClass:"metric-label"},[t._v("成功率")]),e("div",{staticClass:"metric-value"},[t._v(t._s(s.successRate)+"%")]),e("div",{staticClass:"metric-trend",class:{up:s.successRateTrend==="up",down:s.successRateTrend==="down"}},[t._v(" "+t._s(s.successRateChange)+" ")])]),e("div",{staticClass:"metric-row"},[e("div",{staticClass:"metric-label"},[t._v("调用量")]),e("div",{staticClass:"metric-value"},[t._v(t._s(s.callVolume.toLocaleString()))])])]),e("div",{staticClass:"health-actions"},[e("t-button",{attrs:{size:"small",variant:"text"},on:{click:function(a){return t.viewSystemDetail(s)}}},[t._v(" 详情 ")]),e("t-button",{attrs:{size:"small",variant:"text"},on:{click:function(a){return t.viewSystemMetrics(s)}}},[t._v(" 监控 ")])],1)])}),0)])])},p=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"logo-section"},[e("h1",{staticClass:"b2b-title"},[t._v("ER API 管理中心")]),e("p",{staticClass:"b2b-subtitle"},[t._v("企业级API监控、分析与运维平台")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"section-header"},[e("h2",[t._v("API性能排行榜")]),e("p",[t._v("按响应时间和成功率排序的关键API性能指标")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"header-left"},[e("h2",[t._v("实时异常监控")]),e("p",[t._v("最近发生的API异常和错误")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"section-header"},[e("h2",[t._v("系统健康状态")]),e("p",[t._v("各API系统的实时健康状态监控")])])}];const u={name:"HomeB2B",components:{TIcon:h},data(){return{overviewStats:{totalCalls:2568472,callsGrowth:12.5,avgResponseTime:156,responseTimeImprovement:8.3,successRate:99.7,successRateGrowth:.8,errorRate:.3,errorRateReduction:15.2},apiCallsTimeRange:"24h",responseTimeSystem:"all",successRateType:"all",errorDistributionView:"by-system",performanceRanking:[{id:"emp-list",rank:1,apiName:"/api/employees",system:"员工管理",description:"获取员工列表",responseTime:134,responseTimeTrend:"down",responseTimeChange:"-12ms",successRate:99.8,successRateTrend:"up",successRateChange:"+0.2%",callVolume:245623,status:"excellent"},{id:"dept-list",rank:2,apiName:"/api/departments",system:"组织架构",description:"获取部门列表",responseTime:89,responseTimeTrend:"down",responseTimeChange:"-5ms",successRate:99.9,successRateTrend:"stable",successRateChange:"0%",callVolume:187432,status:"excellent"},{id:"att-records",rank:3,apiName:"/api/attendance/records",system:"考勤管理",description:"获取考勤记录",responseTime:156,responseTimeTrend:"up",responseTimeChange:"+8ms",successRate:99.5,successRateTrend:"down",successRateChange:"-0.1%",callVolume:156789,status:"good"},{id:"sal-info",rank:4,apiName:"/api/salary",system:"薪酬福利",description:"获取薪资信息",responseTime:234,responseTimeTrend:"down",responseTimeChange:"-15ms",successRate:99.6,successRateTrend:"up",successRateChange:"+0.3%",callVolume:123456,status:"good"},{id:"perf-reviews",rank:5,apiName:"/api/performance/reviews",system:"绩效管理",description:"获取绩效评估",responseTime:278,responseTimeTrend:"up",responseTimeChange:"+12ms",successRate:98.8,successRateTrend:"down",successRateChange:"-0.4%",callVolume:98765,status:"warning"}],rankingColumns:[{title:"排名",colKey:"rank",width:80,align:"center"},{title:"API名称",colKey:"apiName",width:200},{title:"所属系统",colKey:"system",width:120},{title:"功能描述",colKey:"description",width:180},{title:"响应时间",colKey:"responseTime",width:150,cell:"responseTime"},{title:"成功率",colKey:"successRate",width:150,cell:"successRate"},{title:"调用量",colKey:"callVolume",width:150,cell:"callVolume"},{title:"状态",colKey:"status",width:100,cell:(t,{row:i})=>{const s={excellent:{label:"优秀",color:"#52c41a"},good:{label:"良好",color:"#1890ff"},warning:{label:"警告",color:"#faad14"},error:{label:"异常",color:"#ff4d4f"}}[i.status]||{label:"未知",color:"#d9d9d9"};return t("span",{class:"status-badge",style:{color:s.color,backgroundColor:s.color+"10",padding:"2px 8px",borderRadius:"10px",fontSize:"12px"}},s.label)}},{title:"操作",colKey:"actions",width:150,cell:"actions"}],recentExceptions:[{id:"exc_001",severity:"critical",apiName:"/api/employees",method:"GET",errorCode:500,errorMessage:"数据库连接超时",responseTime:1234,affectedUsers:45,timestamp:new Date(Date.now()-3e5)},{id:"exc_002",severity:"warning",apiName:"/api/attendance/checkin",method:"POST",errorCode:502,errorMessage:"考勤设备离线",responseTime:2345,affectedUsers:28,timestamp:new Date(Date.now()-6e5)},{id:"exc_003",severity:"warning",apiName:"/api/departments",method:"GET",errorCode:408,errorMessage:"请求超时",responseTime:567,affectedUsers:12,timestamp:new Date(Date.now()-9e5)}],systemHealth:[{id:"employee",name:"员工管理系统",icon:"usergroup",status:"healthy",responseTime:134,responseTimeTrend:"down",responseTimeChange:"-8ms",successRate:99.8,successRateTrend:"up",successRateChange:"+0.2%",callVolume:245623},{id:"organization",name:"组织架构系统",icon:"chart",status:"healthy",responseTime:89,responseTimeTrend:"down",responseTimeChange:"-5ms",successRate:99.9,successRateTrend:"stable",successRateChange:"0%",callVolume:187432},{id:"attendance",name:"考勤管理系统",icon:"time",status:"warning",responseTime:156,responseTimeTrend:"up",responseTimeChange:"+8ms",successRate:99.5,successRateTrend:"down",successRateChange:"-0.1%",callVolume:156789},{id:"compensation",name:"薪酬福利系统",icon:"money-circle",status:"healthy",responseTime:234,responseTimeTrend:"down",responseTimeChange:"-15ms",successRate:99.6,successRateTrend:"up",successRateChange:"+0.3%",callVolume:123456},{id:"performance",name:"绩效管理系统",icon:"chart-line",status:"warning",responseTime:278,responseTimeTrend:"up",responseTimeChange:"+12ms",successRate:98.8,successRateTrend:"down",successRateChange:"-0.4%",callVolume:98765},{id:"training",name:"培训发展系统",icon:"graduation-cap",status:"healthy",responseTime:189,responseTimeTrend:"stable",responseTimeChange:"0ms",successRate:99.7,successRateTrend:"stable",successRateChange:"0%",callVolume:87654}],apiCallsChart:null,responseTimeChart:null,successRateChart:null,errorDistributionChart:null}},watch:{apiCallsTimeRange(){this.refreshApiCallsChart()},responseTimeSystem(){this.refreshResponseTimeChart()},successRateType(){this.refreshSuccessRateChart()},errorDistributionView(){this.refreshErrorDistributionChart()}},mounted(){this.$nextTick(()=>{this.refreshAllCharts()}),this.dataRefreshTimer=setInterval(()=>{this.refreshRealTimeData()},3e4)},beforeDestroy(){this.dataRefreshTimer&&clearInterval(this.dataRefreshTimer),this.apiCallsChart&&this.apiCallsChart.dispose(),this.responseTimeChart&&this.responseTimeChart.dispose(),this.successRateChart&&this.successRateChart.dispose(),this.errorDistributionChart&&this.errorDistributionChart.dispose()},methods:{handleSwitchToC(){this.$router.push("/"),this.$message.success("已切换到C端体验版")},handleRefreshData(){this.$message.success("数据刷新中..."),setTimeout(()=>{this.refreshAllCharts(),this.$message.success("数据已刷新")},1e3)},viewApiDetail(t){this.$router.push({path:"/api-detail",query:{apiId:t.id,systemType:t.system==="员工管理"?"employee":t.system==="组织架构"?"organization":t.system==="考勤管理"?"attendance":t.system==="薪酬福利"?"compensation":t.system==="绩效管理"?"performance":"employee"}})},debugApi(t){this.$router.push({path:"/api-debug",query:{url:`https://api.er.com/v1${t.apiName.replace("/api","")}`,method:"GET",apiName:t.description,locked:"true"}})},viewAllExceptions(){this.$message.info("跳转到异常管理页面")},viewExceptionDetail(t){this.$message.info(`查看异常详情: ${t.apiName}`)},markExceptionResolved(t){this.recentExceptions=this.recentExceptions.filter(i=>i.id!==t.id),this.$message.success("异常已标记为已处理")},viewSystemDetail(t){this.$router.push({name:"SystemDetail",query:{systemType:t.id}})},viewSystemMetrics(t){this.$message.info(`查看${t.name}监控指标`)},getExceptionIcon(t){return t==="critical"?"error-circle":"error-triangle"},getExceptionLabel(t){return t==="critical"?"严重":"警告"},formatExceptionTime(t){const e=new Date-t,s=Math.floor(e/6e4),a=Math.floor(e/36e5);return s<60?`${s}分钟前`:a<24?`${a}小时前`:t.toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},getHealthStatusLabel(t){return{healthy:"健康",warning:"警告",error:"异常"}[t]||"未知"},generateCallsData(t){let i=[],e=[];switch(t){case"1h":for(let a=59;a>=0;a--){const r=new Date(Date.now()-a*6e4);i.push(r.getMinutes().toString().padStart(2,"0")),e.push(Math.floor(Math.random()*5e3)+1e3)}break;case"24h":for(let a=23;a>=0;a--){const r=new Date(Date.now()-a*36e5);i.push(r.getHours().toString().padStart(2,"0")+":00"),e.push(Math.floor(Math.random()*2e4)+5e4)}break;case"7d":i=["周一","周二","周三","周四","周五","周六","周日"];for(let a=0;a<7;a++)e.push(Math.floor(Math.random()*15e4)+3e5);break;case"30d":for(let a=29;a>=0;a-=3){const r=new Date(Date.now()-a*864e5);i.push(r.getMonth()+1+"/"+r.getDate()),e.push(Math.floor(Math.random()*2e5)+4e5)}break;default:i=["00:00","04:00","08:00","12:00","16:00","20:00"],e=[58e3,62e3,75e3,89e3,72e3,63e3]}return{labels:i,data:e}},generateResponseTimeData(t){const i=["员工管理","组织架构","考勤管理","薪酬福利","绩效管理","培训发展"];let e=[],s=[];return t==="all"?(e=i,s=[134,89,156,234,278,189]):(e={employee:["/api/employees","/api/employees/{id}","/api/employees/search"],organization:["/api/departments","/api/positions","/api/organizations"],attendance:["/api/attendance/records","/api/attendance/checkin","/api/attendance/summary"],compensation:["/api/salary","/api/salary/calculate","/api/benefits"]}[t]||["API1","API2","API3"],s=e.map(()=>Math.floor(Math.random()*300)+100)),{labels:e,values:s}},generateSuccessRateData(t){let i=[],e=[];switch(i=["周一","周二","周三","周四","周五","周六","周日"],t){case"all":e=[99.2,99.3,99.5,99.6,99.7,99.8,99.7];break;case"critical":e=[99,99.1,99.2,99.3,99.4,99.5,99.6];break;case"highload":e=[99.5,99.6,99.7,99.8,99.7,99.8,99.9];break;default:e=[99.2,99.3,99.5,99.6,99.7,99.8,99.7]}return{labels:i,data:e}},generateErrorDistributionOption(t){switch(t){case"by-system":return{backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",top:"center",data:["员工管理","组织架构","考勤管理","薪酬福利","绩效管理"]},series:[{name:"错误分布",type:"pie",radius:["50%","70%"],center:["60%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {c} ({d}%)"},emphasis:{label:{show:!0,fontSize:"16",fontWeight:"bold"}},data:[{value:45,name:"员工管理",itemStyle:{color:"#1890ff"}},{value:28,name:"组织架构",itemStyle:{color:"#52c41a"}},{value:67,name:"考勤管理",itemStyle:{color:"#faad14"}},{value:23,name:"薪酬福利",itemStyle:{color:"#ff4d4f"}},{value:35,name:"绩效管理",itemStyle:{color:"#722ed1"}}]}]};case"by-error":return{backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",top:"center",data:["500: 服务器错误","502: 网关错误","408: 请求超时","429: 请求频率过高","其他错误"]},series:[{name:"错误类型",type:"pie",radius:["50%","70%"],center:["60%","50%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b}: {c} ({d}%)"},emphasis:{label:{show:!0,fontSize:"16",fontWeight:"bold"}},data:[{value:58,name:"500: 服务器错误",itemStyle:{color:"#ff4d4f"}},{value:34,name:"502: 网关错误",itemStyle:{color:"#faad14"}},{value:27,name:"408: 请求超时",itemStyle:{color:"#1890ff"}},{value:19,name:"429: 请求频率过高",itemStyle:{color:"#52c41a"}},{value:12,name:"其他错误",itemStyle:{color:"#722ed1"}}]}]};case"by-time":return{backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"12%",top:"10%",containLabel:!0},xAxis:{type:"category",data:["0-2点","2-4点","4-6点","6-8点","8-10点","10-12点","12-14点","14-16点","16-18点","18-20点","20-22点","22-24点"],axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666",rotate:45}},yAxis:{type:"value",name:"错误次数",axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666"}},series:[{name:"错误分布",type:"bar",barWidth:"60%",itemStyle:{color:"#ff4d4f"},data:[2,1,0,3,8,12,15,18,22,16,9,4]}]};default:return{}}},refreshRealTimeData(){this.overviewStats.totalCalls+=Math.floor(Math.random()*1e3),this.refreshApiCallsChart()},refreshAllCharts(){this.initApiCallsChart(),this.initResponseTimeChart(),this.initSuccessRateChart(),this.initErrorDistributionChart()},refreshApiCallsChart(){this.apiCallsChart&&this.apiCallsChart.dispose(),this.initApiCallsChart()},refreshResponseTimeChart(){this.responseTimeChart&&this.responseTimeChart.dispose(),this.initResponseTimeChart()},refreshSuccessRateChart(){this.successRateChart&&this.successRateChart.dispose(),this.initSuccessRateChart()},refreshErrorDistributionChart(){this.errorDistributionChart&&this.errorDistributionChart.dispose(),this.initErrorDistributionChart()},initApiCallsChart(){const t=this.$refs.apiCallsChart;if(!t)return;this.apiCallsChart=o(t);const i=this.apiCallsTimeRange,{labels:e,data:s}=this.generateCallsData(i),a={backgroundColor:"transparent",tooltip:{trigger:"axis",formatter:function(r){let l=r[0].axisValue+"<br/>";return r.forEach(n=>{l+=`${n.marker} ${n.seriesName}: ${n.value.toLocaleString()} 次<br/>`}),l}},legend:{data:["API调用量"],bottom:10},grid:{left:"3%",right:"4%",bottom:"12%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e,axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666"}},yAxis:{type:"value",name:"调用量（次）",axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666",formatter:function(r){return r>=1e4?(r/1e4).toFixed(1)+"万":r}}},series:[{name:"API调用量",type:"line",smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:3,color:"#1890ff"},itemStyle:{color:"#1890ff",borderColor:"#fff",borderWidth:2},areaStyle:{opacity:.1,color:"#1890ff"},data:s}]};this.apiCallsChart.setOption(a),window.addEventListener("resize",()=>{this.apiCallsChart.resize()})},initResponseTimeChart(){const t=this.$refs.responseTimeChart;if(!t)return;this.responseTimeChart=o(t);const i=this.responseTimeSystem,e=this.generateResponseTimeData(i),s={backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["响应时间"],bottom:10},grid:{left:"3%",right:"4%",bottom:"12%",top:"10%",containLabel:!0},xAxis:{type:"category",data:e.labels,axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666",rotate:45}},yAxis:{type:"value",name:"响应时间（ms）",axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666"}},series:[{name:"响应时间",type:"bar",barWidth:"60%",itemStyle:{color:function(a){const r=a.data;return r>500?"#ff4d4f":r>300?"#faad14":r>200?"#1890ff":"#52c41a"}},label:{show:!0,position:"top",formatter:"{c}ms"},data:e.values}]};this.responseTimeChart.setOption(s),window.addEventListener("resize",()=>{this.responseTimeChart.resize()})},initSuccessRateChart(){const t=this.$refs.successRateChart;if(!t)return;this.successRateChart=o(t);const i=this.successRateType,{labels:e,data:s}=this.generateSuccessRateData(i),a={backgroundColor:"transparent",tooltip:{trigger:"axis"},legend:{data:["成功率"],bottom:10},grid:{left:"3%",right:"4%",bottom:"12%",top:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e,axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666"}},yAxis:{type:"value",name:"成功率（%）",min:95,max:100,axisLine:{lineStyle:{color:"#d9d9d9"}},axisLabel:{color:"#666",formatter:"{value}%"}},series:[{name:"成功率",type:"line",smooth:!0,symbol:"circle",symbolSize:6,lineStyle:{width:3,color:"#52c41a"},itemStyle:{color:"#52c41a",borderColor:"#fff",borderWidth:2},areaStyle:{opacity:.1,color:"#52c41a"},markLine:{silent:!0,lineStyle:{color:"#ff4d4f",type:"dashed"},data:[{yAxis:99,label:{formatter:"目标线: 99%"}}]},data:s}]};this.successRateChart.setOption(a),window.addEventListener("resize",()=>{this.successRateChart.resize()})},initErrorDistributionChart(){const t=this.$refs.errorDistributionChart;if(!t)return;this.errorDistributionChart=o(t);const i=this.errorDistributionView,e=this.generateErrorDistributionOption(i);this.errorDistributionChart.setOption(e),window.addEventListener("resize",()=>{this.errorDistributionChart.resize()})}}},c={};var v=d(u,m,p,!1,C,"75d0dc02",null,null);function C(t){for(let i in c)this[i]=c[i]}const y=function(){return v.exports}();export{y as default};
