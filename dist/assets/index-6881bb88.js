import{n as d}from"./index-1e0d0c53.js";var u=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"api-debug-container"},[e.loading?t("div",{staticClass:"loading-overlay"},[e._m(0)]):e._e(),t("div",{staticClass:"debug-header"},[t("div",{staticClass:"header-left"},[t("span",{staticClass:"title"},[e._v("在线运行")]),e.isLocked&&e.apiName?t("span",{staticClass:"api-name-badge"},[e._v(e._s(e.apiName))]):e._e()]),t("div",{staticClass:"header-right"},[t("t-button",{attrs:{theme:"default",variant:"text"},on:{click:e.handleClose}},[t("t-icon",{attrs:{name:"close"}})],1)],1)]),t("div",{staticClass:"debug-content"},[t("div",{staticClass:"request-section"},[t("div",{staticClass:"url-row"},[t("t-select",{staticClass:"method-select",attrs:{disabled:e.isLocked,"popup-props":{overlayClassName:"dark-popup"}},model:{value:e.request.method,callback:function(s){e.$set(e.request,"method",s)},expression:"request.method"}},[t("t-option",{attrs:{value:"GET"}},[e._v("GET")]),t("t-option",{attrs:{value:"POST"}},[e._v("POST")]),t("t-option",{attrs:{value:"PUT"}},[e._v("PUT")]),t("t-option",{attrs:{value:"DELETE"}},[e._v("DELETE")]),t("t-option",{attrs:{value:"PATCH"}},[e._v("PATCH")]),t("t-option",{attrs:{value:"HEAD"}},[e._v("HEAD")]),t("t-option",{attrs:{value:"OPTIONS"}},[e._v("OPTIONS")])],1),t("div",{staticClass:"url-input-wrapper",class:{"is-locked":e.isLocked}},[t("t-icon",{staticClass:"url-icon",attrs:{name:"link"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.request.url,expression:"request.url"}],staticClass:"url-input",attrs:{placeholder:"输入请求URL...",disabled:e.isLocked,title:e.isLocked?"试用模式下不可更换API":""},domProps:{value:e.request.url},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendRequest.apply(null,arguments)},input:function(s){s.target.composing||e.$set(e.request,"url",s.target.value)}}}),e.isLocked?t("t-icon",{staticClass:"lock-icon",attrs:{name:"lock-on"}}):e._e()],1),t("t-button",{staticClass:"send-btn",attrs:{theme:"primary",loading:e.loading},on:{click:e.sendRequest}},[e._v(" 发 送 ")])],1),t("div",{staticClass:"auth-section"},[t("div",{staticClass:"section-title"},[e._v("鉴权")]),t("div",{staticClass:"auth-row"},[t("t-select",{staticClass:"auth-type-select",attrs:{"popup-props":{overlayClassName:"dark-popup"}},model:{value:e.request.authType,callback:function(s){e.$set(e.request,"authType",s)},expression:"request.authType"}},[t("t-option",{attrs:{value:"bearer"}},[e._v("Bearer")]),t("t-option",{attrs:{value:"basic"}},[e._v("Basic Auth")]),t("t-option",{attrs:{value:"apikey"}},[e._v("API Key")]),t("t-option",{attrs:{value:"none"}},[e._v("无鉴权")])],1),t("div",{staticClass:"token-input-wrapper"},[(e.showToken?"text":"password")=="checkbox"?t("input",{directives:[{name:"model",rawName:"v-model",value:e.request.token,expression:"request.token"}],staticClass:"token-input",attrs:{placeholder:"Token",type:"checkbox"},domProps:{checked:Array.isArray(e.request.token)?e._i(e.request.token,null)>-1:e.request.token},on:{change:function(s){var o=e.request.token,n=s.target,c=!!n.checked;if(Array.isArray(o)){var r=null,i=e._i(o,r);n.checked?i<0&&e.$set(e.request,"token",o.concat([r])):i>-1&&e.$set(e.request,"token",o.slice(0,i).concat(o.slice(i+1)))}else e.$set(e.request,"token",c)}}}):(e.showToken?"text":"password")=="radio"?t("input",{directives:[{name:"model",rawName:"v-model",value:e.request.token,expression:"request.token"}],staticClass:"token-input",attrs:{placeholder:"Token",type:"radio"},domProps:{checked:e._q(e.request.token,null)},on:{change:function(s){return e.$set(e.request,"token",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.request.token,expression:"request.token"}],staticClass:"token-input",attrs:{placeholder:"Token",type:e.showToken?"text":"password"},domProps:{value:e.request.token},on:{input:function(s){s.target.composing||e.$set(e.request,"token",s.target.value)}}}),t("t-icon",{staticClass:"toggle-icon",attrs:{name:e.showToken?"browse":"browse-off"},on:{click:function(s){e.showToken=!e.showToken}}})],1)],1)]),t("div",{staticClass:"headers-section"},[t("div",{staticClass:"section-title"},[e._v("Headers")]),t("div",{staticClass:"headers-list"},[e._l(e.request.headers,function(s,o){return t("div",{key:o,staticClass:"header-item"},[t("t-checkbox",{staticClass:"header-checkbox",model:{value:s.enabled,callback:function(n){e.$set(s,"enabled",n)},expression:"header.enabled"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.key,expression:"header.key"}],staticClass:"header-key",attrs:{placeholder:"Header名称"},domProps:{value:s.key},on:{input:function(n){n.target.composing||e.$set(s,"key",n.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"header.value"}],staticClass:"header-value",attrs:{placeholder:"Header值"},domProps:{value:s.value},on:{input:function(n){n.target.composing||e.$set(s,"value",n.target.value)}}})],1)}),t("div",{staticClass:"add-header",on:{click:e.addHeader}},[t("t-icon",{attrs:{name:"add"}}),t("span",[e._v("添加参数")])],1)],2)]),t("div",{staticClass:"body-section"},[t("div",{staticClass:"section-header"},[t("span",{staticClass:"section-title"},[e._v("Body")]),t("t-select",{staticClass:"body-type-select",attrs:{"popup-props":{overlayClassName:"dark-popup"}},model:{value:e.request.bodyType,callback:function(s){e.$set(e.request,"bodyType",s)},expression:"request.bodyType"}},[t("t-option",{attrs:{value:"json"}},[e._v("JSON")]),t("t-option",{attrs:{value:"form"}},[e._v("Form Data")]),t("t-option",{attrs:{value:"urlencoded"}},[e._v("URL Encoded")]),t("t-option",{attrs:{value:"raw"}},[e._v("Raw")]),t("t-option",{attrs:{value:"none"}},[e._v("None")])],1)],1),t("div",{staticClass:"body-editor-wrapper"},[t("div",{staticClass:"editor-toolbar"},[t("span",{staticClass:"editor-lang"},[e._v("JSON")]),t("div",{staticClass:"toolbar-actions"},[t("t-dropdown",{attrs:{options:e.exampleOptions},on:{click:e.loadExample}},[t("t-button",{attrs:{variant:"text",size:"small"}},[e._v("示例 "),t("t-icon",{attrs:{name:"chevron-down"}})],1)],1),t("t-button",{attrs:{variant:"text",size:"small"},on:{click:e.clearBody}},[t("t-icon",{attrs:{name:"delete"}})],1)],1)]),t("div",{staticClass:"code-editor"},[t("div",{staticClass:"line-numbers"},e._l(e.bodyLineCount,function(s){return t("div",{key:s,staticClass:"line-number"},[e._v(e._s(s))])}),0),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.request.body,expression:"request.body"}],staticClass:"code-textarea",attrs:{spellcheck:"false"},domProps:{value:e.request.body},on:{input:[function(s){s.target.composing||e.$set(e.request,"body",s.target.value)},e.updateLineCount]}})])])])]),t("div",{staticClass:"response-section",class:{"has-response":e.response.data}},[t("div",{staticClass:"response-tabs"},[e._l(e.responseTabs,function(s){return t("div",{key:s.key,staticClass:"response-tab",class:{active:e.activeResponseTab===s.key},on:{click:function(o){e.activeResponseTab=s.key}}},[e._v(" "+e._s(s.label)+" "),s.count?t("span",{staticClass:"tab-count"},[e._v(e._s(s.count))]):e._e()])}),t("div",{staticClass:"response-meta"},[t("span",{staticClass:"status-badge",class:e.statusClass},[e._v(e._s(e.response.status||"---"))]),t("span",{staticClass:"meta-item"},[e._v(e._s(e.response.time||"---")+"ms")]),t("span",{staticClass:"meta-item"},[e._v(e._s(e.response.size||"---")+"B")])])],2),t("div",{staticClass:"response-content"},[e.activeResponseTab==="body"?t("div",{staticClass:"response-body"},[t("div",{staticClass:"body-toolbar"},[t("div",{staticClass:"format-options"},e._l(e.formatOptions,function(s){return t("span",{key:s,staticClass:"format-option",class:{active:e.responseFormat===s},on:{click:function(o){e.responseFormat=s}}},[e._v(e._s(s))])}),0),t("div",{staticClass:"body-actions"},[t("t-select",{staticClass:"encoding-select",attrs:{"popup-props":{overlayClassName:"dark-popup"}},model:{value:e.responseEncoding,callback:function(s){e.responseEncoding=s},expression:"responseEncoding"}},[t("t-option",{attrs:{value:"utf8"}},[e._v("utf8")]),t("t-option",{attrs:{value:"gbk"}},[e._v("gbk")]),t("t-option",{attrs:{value:"iso-8859-1"}},[e._v("iso-8859-1")])],1),t("t-icon",{staticClass:"action-icon",attrs:{name:"filter"}}),t("t-icon",{staticClass:"action-icon",attrs:{name:"download"},on:{click:e.downloadResponse}}),t("t-icon",{staticClass:"action-icon",attrs:{name:"file-copy"},on:{click:e.copyResponse}}),t("t-icon",{staticClass:"action-icon",attrs:{name:"search"}})],1)]),t("div",{staticClass:"response-code"},[t("div",{staticClass:"line-numbers"},e._l(e.responseLineCount,function(s){return t("div",{key:s,staticClass:"line-number"},[e._v(e._s(s))])}),0),t("pre",{staticClass:"code-content"},[t("code",{domProps:{innerHTML:e._s(e.highlightedResponse)}})])])]):e._e(),e.activeResponseTab==="headers"?t("div",{staticClass:"response-headers"},e._l(e.response.headers,function(s,o){return t("div",{key:o,staticClass:"header-row"},[t("span",{staticClass:"header-key"},[e._v(e._s(o))]),t("span",{staticClass:"header-value"},[e._v(e._s(s))])])}),0):e._e(),e.activeResponseTab==="cookies"?t("div",{staticClass:"response-cookies"},[e.response.cookies&&e.response.cookies.length?t("div",e._l(e.response.cookies,function(s,o){return t("div",{key:o,staticClass:"cookie-row"},[t("span",{staticClass:"cookie-name"},[e._v(e._s(s.name))]),t("span",{staticClass:"cookie-value"},[e._v(e._s(s.value))])])}),0):t("div",{staticClass:"empty-state"},[e._v("暂无Cookie信息")])]):e._e(),!e.response.data&&e.activeResponseTab==="body"?t("div",{staticClass:"empty-response"},[t("t-icon",{staticClass:"empty-icon",attrs:{name:"send"}}),t("p",[e._v("点击发送按钮执行请求")])],1):e._e()])])])])},p=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"loading-content"},[t("div",{staticClass:"loading-spinner"},[t("div",{staticClass:"spinner-ring"}),t("div",{staticClass:"spinner-ring"}),t("div",{staticClass:"spinner-ring"})]),t("div",{staticClass:"loading-text"},[e._v("请求发送中...")]),t("div",{staticClass:"loading-dots"},[t("span"),t("span"),t("span")])])}];const m={name:"ApiDebug",data(){return{loading:!1,showToken:!1,isLocked:!1,apiName:"",request:{method:"POST",url:"https://ark.cn-beijing.volces.com/api/v3/chat/completions",authType:"bearer",token:"",bodyType:"json",body:`{
  "model": "<YOUR_MODEL_EP>",
  "content": [
    {
      "type": "text",
      "text": "戴着帽子的老爷爷面带微笑往前走 --ratio 1:1 --fps 24 --dur 5"
    }
  ]
}`,headers:[{enabled:!0,key:"Content-Type",value:"application/json"},{enabled:!0,key:"Authorization",value:"Bearer {{ARK_API_KEY}}"}]},response:{status:401,time:392,size:210,data:null,headers:{},cookies:[]},activeResponseTab:"body",responseFormat:"Pretty",responseEncoding:"utf8",bodyLineCount:9,exampleOptions:[{content:"聊天补全",value:"chat"},{content:"图像生成",value:"image"},{content:"文本嵌入",value:"embedding"}],formatOptions:["Pretty","Raw","Preview"]}},computed:{responseTabs(){return[{key:"body",label:"Body"},{key:"cookies",label:"Cookie"},{key:"headers",label:"Header",count:Object.keys(this.response.headers).length||6}]},statusClass(){const e=this.response.status;return e?e>=200&&e<300?"success":e>=300&&e<400?"redirect":e>=400&&e<500?"client-error":"server-error":""},responseLineCount(){return this.response.data?(typeof this.response.data=="string"?this.response.data:JSON.stringify(this.response.data,null,2)).split(`
`).length:1},highlightedResponse(){if(!this.response.data)return"";let e=typeof this.response.data=="string"?this.response.data:JSON.stringify(this.response.data,null,2);return this.responseFormat==="Raw"?this.escapeHtml(e):this.highlightJson(e)}},methods:{handleClose(){this.$router.back()},addHeader(){this.request.headers.push({enabled:!0,key:"",value:""})},updateLineCount(){this.bodyLineCount=(this.request.body.match(/\n/g)||[]).length+1},clearBody(){this.request.body="",this.bodyLineCount=1},loadExample(e){const a={chat:`{
  "model": "<YOUR_MODEL_EP>",
  "messages": [
    {
      "role": "user",
      "content": "你好，请介绍一下你自己"
    }
  ],
  "max_tokens": 1024,
  "temperature": 0.7
}`,image:`{
  "model": "<YOUR_MODEL_EP>",
  "prompt": "一只可爱的猫咪在阳光下睡觉",
  "n": 1,
  "size": "1024x1024"
}`,embedding:`{
  "model": "<YOUR_MODEL_EP>",
  "input": "这是一段需要向量化的文本"
}`};this.request.body=a[e.value]||"",this.updateLineCount()},async sendRequest(){this.loading=!0;const e=Date.now(),a=Math.floor(Math.random()*600)+200;await new Promise(s=>setTimeout(s,a));const t=this.generateMockResponse();this.response={status:t.status,time:Date.now()-e,size:JSON.stringify(t.data).length,data:t.data,headers:t.headers,cookies:[]},this.loading=!1},generateMockResponse(){const e=this.request.url.toLowerCase(),a=this.request.method.toUpperCase();let t={};if(this.request.body&&this.request.bodyType==="json")try{t=JSON.parse(this.request.body)}catch{t={}}const s={"content-type":"application/json","x-request-id":this.generateRequestId(),"x-response-time":`${Math.floor(Math.random()*100)+50}ms`,date:new Date().toUTCString()};return this.request.token?e.includes("chat")||e.includes("completions")?this.mockChatResponse(t,s):e.includes("image")||e.includes("generation")?this.mockImageResponse(t,s):e.includes("embedding")?this.mockEmbeddingResponse(t,s):e.includes("model")?this.mockModelListResponse(s):this.mockGenericResponse(a,t,s):{status:401,data:{error:{code:"AuthenticationError",message:"the API key or AK/SK in the request is missing or invalid. request id: "+this.generateRequestId(),param:"",type:"Unauthorized"}},headers:s}},generateRequestId(){return"req_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},mockChatResponse(e,a){const t=e.model||"doubao-pro-32k";return{status:200,data:{id:"chatcmpl-"+this.generateRequestId(),object:"chat.completion",created:Math.floor(Date.now()/1e3),model:t,choices:[{index:0,message:{role:"assistant",content:`您好！我是AI助手，这是一条模拟的响应消息。当前为调试模式，返回的是模拟数据而非真实API调用结果。

如需测试真实API，请配置实际的API服务。`},finish_reason:"stop"}],usage:{prompt_tokens:Math.floor(Math.random()*100)+20,completion_tokens:Math.floor(Math.random()*200)+50,total_tokens:Math.floor(Math.random()*300)+70}},headers:a}},mockImageResponse(e,a){return{status:200,data:{created:Math.floor(Date.now()/1e3),data:[{url:"https://example.com/mock-image-"+this.generateRequestId()+".png",revised_prompt:e.prompt||"模拟生成的图片"}]},headers:a}},mockEmbeddingResponse(e,a){return{status:200,data:{object:"list",data:[{object:"embedding",index:0,embedding:Array.from({length:1536},()=>(Math.random()-.5)*.1).slice(0,10).concat(["... 更多维度数据省略 ..."])}],model:e.model||"text-embedding-ada-002",usage:{prompt_tokens:Math.floor(Math.random()*50)+10,total_tokens:Math.floor(Math.random()*50)+10}},headers:a}},mockModelListResponse(e){return{status:200,data:{object:"list",data:[{id:"doubao-pro-32k",object:"model",created:17e8,owned_by:"bytedance"},{id:"doubao-lite-4k",object:"model",created:17e8,owned_by:"bytedance"},{id:"doubao-vision",object:"model",created:17e8,owned_by:"bytedance"},{id:"doubao-embedding",object:"model",created:17e8,owned_by:"bytedance"}]},headers:e}},mockGenericResponse(e,a,t){return e==="GET"?{status:200,data:{success:!0,message:"查询成功（模拟数据）",data:{id:Math.floor(Math.random()*1e4),name:"示例数据",description:"这是模拟返回的数据",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},pagination:{page:a.page||1,pageSize:a.pageSize||10,total:100}},headers:t}:e==="POST"?{status:201,data:{success:!0,message:"创建成功（模拟数据）",data:{id:Math.floor(Math.random()*1e4),...a,createdAt:new Date().toISOString()}},headers:t}:e==="PUT"||e==="PATCH"?{status:200,data:{success:!0,message:"更新成功（模拟数据）",data:{...a,updatedAt:new Date().toISOString()}},headers:t}:e==="DELETE"?{status:200,data:{success:!0,message:"删除成功（模拟数据）"},headers:t}:{status:200,data:{success:!0,message:"请求成功（模拟数据）",method:e,timestamp:new Date().toISOString()},headers:t}},copyResponse(){const e=typeof this.response.data=="string"?this.response.data:JSON.stringify(this.response.data,null,2);navigator.clipboard.writeText(e),this.$message.success("已复制到剪贴板")},downloadResponse(){const e=typeof this.response.data=="string"?this.response.data:JSON.stringify(this.response.data,null,2),a=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download="response.json",s.click(),URL.revokeObjectURL(t)},escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},highlightJson(e){return e?(e=this.escapeHtml(e),e.replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(a,t)=>`<span class="json-string">"${t}"</span>`).replace(/\b(\d+\.?\d*)\b/g,'<span class="json-number">$1</span>').replace(/\b(true|false|null)\b/g,'<span class="json-boolean">$1</span>')):""},setDefaultBody(e){e==="GET"||e==="DELETE"||e==="HEAD"?(this.request.body="",this.request.bodyType="none"):(this.request.body=`{
  "page": 1,
  "pageSize": 10
}`,this.request.bodyType="json"),this.updateLineCount()},handleClose(){this.$router.back()}},mounted(){const{url:e,method:a,apiName:t,locked:s}=this.$route.query;s==="true"?(this.isLocked=!0,this.apiName=t||"",e&&(this.request.url=e),a&&(this.request.method=a.toUpperCase()),this.setDefaultBody(a),this.response.data=null):this.response.data={error:{code:"AuthenticationError",message:"the API key or AK/SK in the request is missing or invalid. request id: 02176534905211115de161b16d50149cbf4122a430bab0f0686736",param:"",type:"Unauthorized"}}}},l={};var v=d(m,u,p,!1,h,"dffbe126",null,null);function h(e){for(let a in l)this[a]=l[a]}const g=function(){return v.exports}();export{g as default};
