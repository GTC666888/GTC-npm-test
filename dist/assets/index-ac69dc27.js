import{n as l,I as p,M as n}from"./index-1e0d0c53.js";var v=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"token-container"},[e("div",{staticClass:"token-header"},[e("div",{staticClass:"header-content"},[e("t-button",{staticClass:"back-btn",attrs:{theme:"default",variant:"text"},on:{click:function(s){return t.$router.back()}}},[e("t-icon",{attrs:{name:"chevron-left"}}),t._v("返回 ")],1),t._m(0)],1)]),e("div",{staticClass:"token-content"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"main-panel"},[e("div",{staticClass:"credential-section"},[e("div",{staticClass:"section-header"},[e("div",{staticClass:"section-icon"},[e("t-icon",{attrs:{name:"secured",size:"24px"}})],1),t._m(1)]),e("t-form",{ref:"credentialForm",staticClass:"credential-form",attrs:{data:t.credentials,rules:t.credentialRules,"label-width":"100px"}},[e("t-form-item",{attrs:{label:"AppKey",name:"appKey"}},[e("t-input",{attrs:{placeholder:"请输入AppKey",clearable:"",size:"large"},scopedSlots:t._u([{key:"prefix-icon",fn:function(){return[e("t-icon",{attrs:{name:"user"}})]},proxy:!0}]),model:{value:t.credentials.appKey,callback:function(s){t.$set(t.credentials,"appKey",s)},expression:"credentials.appKey"}})],1),e("t-form-item",{attrs:{label:"AppSecret",name:"appSecret"}},[e("t-input",{attrs:{type:t.showSecret?"text":"password",placeholder:"请输入AppSecret",clearable:"",size:"large"},scopedSlots:t._u([{key:"prefix-icon",fn:function(){return[e("t-icon",{attrs:{name:"lock-on"}})]},proxy:!0},{key:"suffix-icon",fn:function(){return[e("t-icon",{staticStyle:{cursor:"pointer"},attrs:{name:t.showSecret?"browse":"browse-off"},on:{click:function(s){t.showSecret=!t.showSecret}}})]},proxy:!0}]),model:{value:t.credentials.appSecret,callback:function(s){t.$set(t.credentials,"appSecret",s)},expression:"credentials.appSecret"}})],1),e("t-form-item",{attrs:{label:"授权范围",name:"scope"}},[e("t-select",{attrs:{placeholder:"选择授权范围（可选）",clearable:"",size:"large",multiple:""},model:{value:t.credentials.scope,callback:function(s){t.$set(t.credentials,"scope",s)},expression:"credentials.scope"}},[e("t-option",{attrs:{value:"read",label:"读取权限 (read)"}},[e("div",{staticClass:"scope-option"},[e("span",{staticClass:"scope-name"},[t._v("读取权限")]),e("span",{staticClass:"scope-desc"},[t._v("read - 允许读取数据")])])]),e("t-option",{attrs:{value:"write",label:"写入权限 (write)"}},[e("div",{staticClass:"scope-option"},[e("span",{staticClass:"scope-name"},[t._v("写入权限")]),e("span",{staticClass:"scope-desc"},[t._v("write - 允许写入数据")])])]),e("t-option",{attrs:{value:"admin",label:"管理权限 (admin)"}},[e("div",{staticClass:"scope-option"},[e("span",{staticClass:"scope-name"},[t._v("管理权限")]),e("span",{staticClass:"scope-desc"},[t._v("admin - 允许管理操作")])])])],1)],1),e("div",{staticClass:"form-actions"},[e("t-button",{attrs:{theme:"primary",size:"large",block:"",loading:t.loading},on:{click:t.getAccessToken}},[e("t-icon",{attrs:{name:"play-circle"}}),t._v("获取访问令牌 ")],1)],1)],1)],1),t.tokenData?e("div",{staticClass:"token-result-section"},[e("div",{staticClass:"section-header success"},[e("div",{staticClass:"section-icon"},[e("t-icon",{attrs:{name:"check-circle",size:"24px"}})],1),t._m(2)]),e("div",{staticClass:"token-info-card"},[e("div",{staticClass:"token-field"},[e("div",{staticClass:"field-header"},[e("span",{staticClass:"field-label"},[t._v("Access Token")]),e("div",{staticClass:"field-actions"},[e("t-button",{attrs:{variant:"text",size:"small"},on:{click:function(s){return t.copyToClipboard(t.tokenData.accessToken,"Access Token")}}},[e("t-icon",{attrs:{name:"file-copy"}}),t._v("复制 ")],1)],1)]),e("div",{staticClass:"field-value token-value"},[e("code",[t._v(t._s(t.tokenData.accessToken))])])]),e("div",{staticClass:"token-meta"},[e("div",{staticClass:"meta-item"},[e("span",{staticClass:"meta-label"},[t._v("令牌类型")]),e("span",{staticClass:"meta-value"},[e("t-tag",{attrs:{theme:"primary",variant:"light"}},[t._v(t._s(t.tokenData.tokenType))])],1)]),e("div",{staticClass:"meta-item"},[e("span",{staticClass:"meta-label"},[t._v("有效期")]),e("span",{staticClass:"meta-value"},[e("t-tag",{attrs:{theme:"success",variant:"light"}},[t._v(t._s(t.tokenData.expiresIn)+" 秒")])],1)]),e("div",{staticClass:"meta-item"},[e("span",{staticClass:"meta-label"},[t._v("过期时间")]),e("span",{staticClass:"meta-value"},[t._v(t._s(t.tokenData.expiresAt))])]),t.tokenData.scope?e("div",{staticClass:"meta-item"},[e("span",{staticClass:"meta-label"},[t._v("授权范围")]),e("span",{staticClass:"meta-value"},t._l(t.tokenData.scope.split(" "),function(s){return e("t-tag",{key:s,staticStyle:{"margin-right":"4px"},attrs:{theme:"warning",variant:"light"}},[t._v(t._s(s))])}),1)]):t._e()]),t.tokenData.refreshToken?e("div",{staticClass:"token-field"},[e("div",{staticClass:"field-header"},[e("span",{staticClass:"field-label"},[t._v("Refresh Token")]),e("div",{staticClass:"field-actions"},[e("t-button",{attrs:{variant:"text",size:"small"},on:{click:function(s){return t.copyToClipboard(t.tokenData.refreshToken,"Refresh Token")}}},[e("t-icon",{attrs:{name:"file-copy"}}),t._v("复制 ")],1)],1)]),e("div",{staticClass:"field-value token-value"},[e("code",[t._v(t._s(t.tokenData.refreshToken))])])]):t._e(),e("div",{staticClass:"token-actions"},[e("t-button",{attrs:{theme:"default"},on:{click:t.copyAllTokenInfo}},[e("t-icon",{attrs:{name:"file-copy"}}),t._v("复制全部信息 ")],1),t.tokenData.refreshToken?e("t-button",{attrs:{theme:"primary",variant:"outline",loading:t.refreshing},on:{click:t.refreshAccessToken}},[e("t-icon",{attrs:{name:"refresh"}}),t._v("刷新令牌 ")],1):t._e(),e("t-button",{attrs:{theme:"danger",variant:"outline"},on:{click:t.clearToken}},[e("t-icon",{attrs:{name:"delete"}}),t._v("清除令牌 ")],1)],1)])]):t._e()]),e("div",{staticClass:"help-panel"},[e("div",{staticClass:"help-card"},[e("h3",[e("t-icon",{attrs:{name:"help-circle"}}),t._v(" 使用说明")],1),t._m(3)]),e("div",{staticClass:"help-card"},[e("h3",[e("t-icon",{attrs:{name:"code"}}),t._v(" 请求示例")],1),e("div",{staticClass:"code-block"},[e("div",{staticClass:"code-header"},[e("span",[t._v("获取Token请求")]),e("t-button",{attrs:{variant:"text",size:"small"},on:{click:t.copyRequestExample}},[e("t-icon",{attrs:{name:"file-copy"}})],1)],1),t._m(4)])]),e("div",{staticClass:"help-card"},[e("h3",[e("t-icon",{attrs:{name:"api"}}),t._v(" 使用Token")],1),e("div",{staticClass:"code-block"},[e("div",{staticClass:"code-header"},[e("span",[t._v("API调用示例")]),e("t-button",{attrs:{variant:"text",size:"small"},on:{click:t.copyUsageExample}},[e("t-icon",{attrs:{name:"file-copy"}})],1)],1),t._m(5)])]),e("div",{staticClass:"help-card warning"},[e("h3",[e("t-icon",{attrs:{name:"error-circle"}}),t._v(" 安全提示")],1),t._m(6)])])])])])},d=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"header-title"},[e("h1",[t._v("获取访问令牌")]),e("p",[t._v("使用AppKey和AppSecret获取Access Token，用于API接口调用认证")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-info"},[e("h2",[t._v("应用凭证")]),e("p",[t._v("输入您的AppKey和AppSecret以获取访问令牌")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-info"},[e("h2",[t._v("令牌获取成功")]),e("p",[t._v("请妥善保管您的访问令牌，不要泄露给他人")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"help-content"},[e("div",{staticClass:"help-step"},[e("span",{staticClass:"step-num"},[t._v("1")]),e("div",{staticClass:"step-content"},[e("strong",[t._v("输入凭证")]),e("p",[t._v("填写您应用审核通过后获得的AppKey和AppSecret")])])]),e("div",{staticClass:"help-step"},[e("span",{staticClass:"step-num"},[t._v("2")]),e("div",{staticClass:"step-content"},[e("strong",[t._v("选择范围")]),e("p",[t._v("根据需要选择授权范围，默认为全部权限")])])]),e("div",{staticClass:"help-step"},[e("span",{staticClass:"step-num"},[t._v("3")]),e("div",{staticClass:"step-content"},[e("strong",[t._v("获取令牌")]),e("p",[t._v("点击按钮获取Access Token")])])]),e("div",{staticClass:"help-step"},[e("span",{staticClass:"step-num"},[t._v("4")]),e("div",{staticClass:"step-content"},[e("strong",[t._v("调用接口")]),e("p",[t._v("在API请求头中携带Token进行认证")])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("pre",[e("code",[t._v(`POST /oauth/token HTTP/1.1
Host: api.example.com
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials
&client_id=YOUR_APP_KEY
&client_secret=YOUR_APP_SECRET
&scope=read write`)])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("pre",[e("code",[t._v(`GET /api/v1/employees HTTP/1.1
Host: api.example.com
Authorization: Bearer YOUR_ACCESS_TOKEN
Content-Type: application/json`)])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"warning-list"},[e("li",[t._v("Access Token 具有时效性，过期后需重新获取")]),e("li",[t._v("请勿将 AppSecret 暴露在前端代码中")]),e("li",[t._v("建议在服务端调用获取Token接口")]),e("li",[t._v("Token 泄露后请及时重置 AppSecret")])])}];const _={name:"Token",components:{TIcon:p},data(){return{loading:!1,refreshing:!1,showSecret:!1,credentials:{appKey:"",appSecret:"",scope:[]},credentialRules:{appKey:[{required:!0,message:"请输入AppKey",type:"error"}],appSecret:[{required:!0,message:"请输入AppSecret",type:"error"}]},tokenData:null}},methods:{getAccessToken(){this.$refs.credentialForm.validate().then(t=>{if(t!==!0){n.warning("请填写完整的凭证信息");return}this.loading=!0,setTimeout(()=>{const a=new Date,e=7200,s=new Date(a.getTime()+e*1e3);this.tokenData={accessToken:this.generateToken(64),tokenType:"Bearer",expiresIn:e,expiresAt:this.formatDateTime(s),scope:this.credentials.scope.length>0?this.credentials.scope.join(" "):"read write admin",refreshToken:this.generateToken(48)},this.loading=!1,n.success("访问令牌获取成功！")},1500)})},refreshAccessToken(){if(!this.tokenData||!this.tokenData.refreshToken){n.warning("没有可用的Refresh Token");return}this.refreshing=!0,setTimeout(()=>{const t=new Date,a=7200,e=new Date(t.getTime()+a*1e3);this.tokenData.accessToken=this.generateToken(64),this.tokenData.expiresAt=this.formatDateTime(e),this.refreshing=!1,n.success("访问令牌已刷新！")},1e3)},clearToken(){this.tokenData=null,n.info("令牌已清除")},generateToken(t){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let s=0;s<t;s++)e+=a.charAt(Math.floor(Math.random()*a.length));return e},formatDateTime(t){const a=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),c=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return`${a}-${e}-${s} ${c}:${r}:${o}`},copyToClipboard(t,a){navigator.clipboard.writeText(t).then(()=>{n.success(`${a} 已复制到剪贴板`)}).catch(()=>{n.error("复制失败，请手动复制")})},copyAllTokenInfo(){if(!this.tokenData)return;const t=`Access Token: ${this.tokenData.accessToken}
Token Type: ${this.tokenData.tokenType}
Expires In: ${this.tokenData.expiresIn} 秒
Expires At: ${this.tokenData.expiresAt}
Scope: ${this.tokenData.scope}
${this.tokenData.refreshToken?"Refresh Token: "+this.tokenData.refreshToken:""}`;this.copyToClipboard(t,"令牌信息")},copyRequestExample(){const t=`POST /oauth/token HTTP/1.1
Host: api.example.com
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials&client_id=YOUR_APP_KEY&client_secret=YOUR_APP_SECRET&scope=read write`;this.copyToClipboard(t,"请求示例")},copyUsageExample(){const t=`GET /api/v1/employees HTTP/1.1
Host: api.example.com
Authorization: Bearer YOUR_ACCESS_TOKEN
Content-Type: application/json`;this.copyToClipboard(t,"使用示例")}}},i={};var m=l(_,v,d,!1,h,"2cfbb368",null,null);function h(t){for(let a in i)this[a]=i[a]}const f=function(){return m.exports}();export{f as default};
