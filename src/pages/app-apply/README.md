# 创建应用页面

## 功能概述

创建应用页面是ER API Center的核心功能，允许开发者创建应用。提交申请后，审核通过将自动分配AppKey和AppSecret。

## 页面路由

- **路径**: `/app-apply`
- **名称**: `AppApply`
- **组件**: `src/pages/app-apply/index.vue`

## 功能特性

### 1. 应用创建流程

#### 填写应用基本信息
- **站点名称**: 必填，2-50个字符，如"人力资源管理系统"
- **站点地址**: 必填，完整的URL地址，如"https://your-domain.com"
- **应用描述**: 必填，10-500个字符，详细描述应用用途和功能
- **联系人**: 必填，联系人姓名
- **联系邮箱**: 必填，有效的邮箱地址，用于接收审核通知

#### 提交申请
- **服务协议**: 必须同意《API服务协议》
- **表单验证**: 自动验证所有必填字段
- **提交审核**: 提交后进入审核流程
- **凭证分配**: 审核通过后系统自动分配AppKey和AppSecret

### 2. 表单验证

完善的表单验证规则，确保数据质量：
- **站点名称**: 2-50个字符
- **站点地址**: 必须是有效的URL格式（http://或https://）
- **应用描述**: 10-500个字符
- **联系人**: 必填
- **联系邮箱**: 必须是有效的邮箱格式
- **服务协议**: 必须同意才能提交

### 3. 用户体验优化

- **清晰布局**: 简洁的单页面表单设计
- **实时验证**: 表单字段实时验证反馈
- **友好提示**: 每个字段都有详细的输入说明
- **响应式设计**: 完美支持移动端和桌面端
- **动画效果**: 平滑的页面过渡动画
- **智能禁用**: 未满足条件时提交按钮自动禁用

## 使用方式

### 从首页进入

在首页的"开发者指南"部分，点击"申请应用"卡片中的"立即申请"按钮：

```vue
<t-button theme="primary" size="small" @click="handleStepGuide('apply')">
  立即申请
</t-button>
```

### 直接访问

直接访问URL: `http://your-domain/app-apply`

## 使用流程

1. **进入页面**: 从首页点击"立即申请"或直接访问创建应用页面

2. **填写应用信息**: 
   - 输入站点名称（如：人力资源管理系统）
   - 输入站点地址（如：https://hr.company.com）
   - 填写应用描述（详细说明应用用途）
   - 填写联系人信息（姓名和邮箱）

3. **同意协议**: 勾选"我已阅读并同意《API服务协议》"

4. **提交申请**: 点击"提交申请"按钮

5. **等待审核**: 系统显示申请成功消息，等待管理员审核

6. **获取凭证**: 审核通过后，系统将通过邮箱发送AppKey和AppSecret

## 技术实现

### 组件依赖

- **TDesign Vue**: UI组件库
- **TDesign Icons**: 图标库
- **Vue Router**: 路由管理

### 核心方法

```javascript
// API选择管理
toggleApi(apiId)              // 切换单个API选择状态
toggleCategory(categoryKey)   // 切换分类全选状态
isCategorySelected()          // 判断分类是否全选
isCategoryIndeterminate()     // 判断分类是否部分选中
getSelectedApiDetails()       // 获取已选择的API详情

// 提交申请
submitApplication()           // 提交权限申请

// 工具方法
showTerms()                   // 显示服务协议
```

### 数据结构

```javascript
// 组件数据
data() {
  return {
    submitting: false,        // 提交状态
    agreeTerms: false,        // 是否同意协议
    
    // 表单数据
    formData: {
      siteName: '',           // 站点名称
      siteUrl: '',            // 站点地址
      description: '',        // 应用描述
      contactName: '',        // 联系人
      contactEmail: ''        // 联系邮箱
    },
    
    // 表单验证规则
    formRules: {
      siteName: [...],        // 站点名称验证规则
      siteUrl: [...],         // 站点地址验证规则
      description: [...],     // 应用描述验证规则
      contactName: [...],     // 联系人验证规则
      contactEmail: [...]     // 联系邮箱验证规则
    }
  }
}
```

## 样式设计

### 设计规范

- **主色调**: #0052d9 (TDesign蓝)
- **成功色**: #52c41a
- **警告色**: #faad14
- **错误色**: #ff4d4f
- **背景色**: #f5f5f5
- **卡片背景**: #ffffff
- **边框色**: #f0f0f0

### 响应式断点

- **桌面端**: > 768px
- **移动端**: ≤ 768px

## 界面预览

### 主要区域

1. **页面头部**: 
   - 返回按钮
   - 页面标题："创建应用"
   - 页面描述："填写应用基本信息，提交后等待审核通过"
   - 渐变蓝色背景

2. **应用信息表单**:
   - 站点名称输入框
   - 站点地址输入框（带URL格式提示）
   - 应用描述文本域（支持字数统计，最多500字）
   - 联系人输入框
   - 联系邮箱输入框
   - 实时表单验证反馈

3. **底部操作区**:
   - 服务协议勾选框
   - 取消按钮
   - 提交申请按钮

## 审核流程

1. **提交申请**: 用户填写完整信息并提交
2. **进入审核**: 申请进入待审核队列
3. **管理员审核**: 管理员审核应用信息和API权限申请
4. **审核通过**: 
   - 系统自动生成AppKey和AppSecret
   - 通过邮箱发送凭证信息给申请人
   - 应用状态变更为"已激活"
5. **审核拒绝**: 
   - 通过邮箱通知申请人拒绝原因
   - 用户可修改后重新提交

## 后续优化建议

1. **后端集成**: 连接真实的后端API服务和审核系统
2. **应用管理**: 支持查看已创建的应用列表和状态
3. **凭证管理**: 支持查看、重置AppKey和AppSecret
4. **应用列表**: 查看已创建的应用列表和状态
5. **使用统计**: 显示应用的API调用统计
6. **申请历史**: 记录和查看历史申请记录和审核状态
7. **审批流程**: 完善管理员审批界面和流程
8. **通知系统**: 
   - 审核结果邮件通知
   - 应用状态变更通知
9. **应用图标**: 支持上传应用图标
10. **多环境支持**: 支持开发、测试、生产环境的独立配置
11. **API权限管理**: 后续可添加API权限申请功能

## 相关文件

- 页面组件: `src/pages/app-apply/index.vue`
- 路由配置: `src/router/index.js`
- 首页入口: `src/pages/home/index.vue`
- 功能文档: `src/pages/app-apply/README.md`

## 更新日志

### v4.0.0 (2024-12-10)
- 🎉 重大更新：简化为只填写应用基本信息
- ✨ 移除API权限选择功能
- ✨ 专注于应用创建核心流程
- 🎨 简化界面布局，单页面表单设计
- 📝 更新文档说明

### v3.0.0 (2024-12-09)
- 🎉 重大更新：改为创建应用流程
- ✨ 添加应用基本信息表单（站点名称、站点地址、应用描述）
- ✨ 添加联系人信息（姓名、邮箱）
- ✨ 完善的表单验证规则
- ✨ 提交后进入审核流程
- ✨ 审核通过后分配AppKey和AppSecret
- 🎨 优化界面布局，分区展示应用信息和API权限
- 📝 更新文档说明审核流程

### v2.0.0 (2024-12-09)
- 🎉 重大更新：简化申请流程
- ✨ 移除复杂的表单填写步骤
- ✨ 专注于API权限选择核心功能
- ✨ 优化用户体验，一页完成申请
- ✨ 即时反馈，申请成功后自动跳转
- 🎨 优化界面布局和交互设计
- 📱 增强移动端响应式支持

### v1.0.0 (2024-12-09)
- ✨ 初始版本发布
- ✨ 实现四步申请流程
- ✨ 支持API权限选择
- ✨ 完善的表单验证
- ✨ 响应式设计
